---
layout: post
title: "week of 24 jun"
date: 2019-06-24
---

### 24 jun

What will this week bring? Now that it's been confirmed we're pretty well in the clear for migrating our current site to a server with PHP 7.2 and upgrade to WP 5.2.2, I'm going to try to make sure everything I can test has been tested. Then I probably need to go back through my logs and files and see where I changed things. I didn't make any real changes to code... most of my issues were due to filepaths (which shouldn't change if we're just copying from one server to the other?) or apache settings (which Jennifer will handle with ease). 

Maybe today I can go back and forth between making sure those plugins are all upgradeable and php warnings are being handled and writing documentation?

#### debugging the error/notice logs

There's this really annoying notice that won't quit showing up, even when I haven't refreshed the page: `wp_enqueue_script` and `wp_register_script` called incorrectly: styles and scripts shouldn't be registered or enqueued until `wp_enqueued_scripts`, `admin_enqueue_scrtips`, or `login_enqueue_scripts` hooks. 

I commented out the last few lines in `ualib-functions.php` that does the live reload thing for the dev environment and they stopped showing up, so I'm pretty sure that's it. I'm going to turn down the DEBUG setting in `wp-config.php` because this is out of control.

There also seems to be something wrong with the Advanced Custom Fields plugin or they way we use it. I can't pinpoint what exactly it is, but it's a warning and not an error, so I'm going to leave it alone: `Warning: Invalid argument supplied for foreach() in /var/www/html/wp-content/plugins/advanced-custom-fields/includes/acf-meta-functions.php on line 95`. 

All the other logs are either from the WP heartbeat (checking whether I'm an active user, if my token is still good, if I'm still logged in) or telling me I'm missing a link (no surprise there, I only partially imported some pages and no other content). I think we're in the clear!

#### documentation

I'm a little fuzzy about how exactly to document this codebase, especially since it's all about to change. I suppose I could document my docker container and see what coalesces from there?

I spent the afternoon double checking where things live, how things compile/build, what connects to what... it's all very complicated, but I think I actually get it now that I've had to touch most pieces of it. I drew a "map" of all the important bits of the site (wordpress, webapps back/front-end, and databases). The angular/front-end apps really need their own map, probably. Their nature is complicated: the truly front-end apps are grabbing data from their respective API and spitting that out to a template that is then incorporated into the WP theme. The `manage` app on the other hand, does GET and POST requests in order to update the information those apps serve to their templates. How to explain that in a flowchart?

I also started documenting versions and timelines for upgrading all our languages, libraries, and dependencies. Yikes. There's a LOT going on here. But the sooner we know what we're dealing with, the better off we'll be, right?

Tomorrow:
- Start writing documentation to accompany map
- Complete version/timelines for webapps
